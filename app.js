const I18N = {
  az: {
    nav_home: "Ana səhifə",
    nav_music: "Canlı musiqi",
    nav_menu: "Menyu",
    nav_contacts: "Əlaqə",
    nav_location: "Lokasiya",
    nav_rules: "Qaydalar",

    hero_title: "Bahçe Restoran",
    hero_title_html: "<span class=\"brand-hero-main\">Bahçe</span> <span class=\"brand-hero-sub\">RESTORAN</span>",
    hero_slogan: "Turkish Vibes in Baku",
    hero_desc: "FOOD • DRINKS • MUSIC • SHISHA",
    cta_book: "Masa bron et",
    cta_menu: "Menyunu aç",

    rules_title: "Qaydalar",
    rules_sub: "Zəhmət olmasa, aşağıdakı qaydalarla əvvəlcədən tanış olun.",

    r1_t: "Restoranın iş saatları",
    r1_b: "Saat 10:00-dan son müştəriyə qədər.",

    r2_t: "Canlı musiqi",
    r2_b: "Hər gün 21:00-dan 23:00-a qədər.",

    r3_t: "İstirahət günü",
    r3_b: "Bazar ertəsi restoran işləmir.",

    r4_t: "Yaş məhdudiyyəti",
    r4_b: "19:00-dan sonra restoran 13 yaşdan kiçik uşaqları qəbul etmir. 13–18 yaş arası qonaqlar yalnız valideynlərin müşayiəti ilə qəbul olunur.",

    r5_t: "Məkanın formatı",
    r5_b: "Restoran yalnız kişilərdən ibarət olan qrupları qəbul etmir.",

    r6_t: "Depozit sistemi",
    r6_b: "— Çərşənbə axşamı, çərşənbə və cümə axşamı hər qonaq üçün depozit məbləği 50 AZN təşkil edir. — Cümə, şənbə və bazar günləri hər qonaq üçün depozit məbləği 100 AZN təşkil edir. Qəlyan depozit məbləğinə daxil deyil.",

    r7_t: "Rezervasiya",
    r7_b: "Rezervasiya zamanı qonaqların dəqiq sayını göstərməyinizi xahiş edirik, çünki hesab ödənilərkən depozit əvvəlcədən bildirilmiş nəfər sayına görə tutulur.",

    r8_t: "İşıq avadanlıqlarına qadağa",
    r8_b: "Restoranda hər hansı işıq cihazlarının, flaşların, proyektorların və parlaq işıq yayan digər avadanlıqların istifadəsi qadağandır, çünki bu, digər qonaqların istirahətinə mane olur.",

    r9_t: "Dress-kod",
    r9_b: "Restoranda dress-kod tətbiq olunur. Məkanın formatını nəzərə alaraq uyğun geyim seçməyinizi xahiş edirik. Çimərlik tipli geyim və həddindən artıq açıq geyimlər arzuolunmazdır.",

    rules_footer: "Administrasiya bu qaydalara əməl olunmadığı təqdirdə girişdən imtina etmək hüququnu özündə saxlayır.\n\nHörmətlə,\nBahçe ailəsi",

    music_title: "Canlı musiqi",
    music_sub: "Hər gün 21:00-dan 23:00-a qədər",
    music_btn: "Çıxış cədvəli",
    music_event_label: "Yaxın tədbir",
    music_event_title: "Bu həftə",
    music_event_note: "Şəkli dəyişmək üçün: /assets/live-event.jpg",

    menu_title: "Menyu",
    menu_subline: "Мы предлагаем широкий выбор блюд турецкой кухни, приготовленных по традиционным рецептам, а также разнообразные напитки на любой вкус. Меню объединяет классику и современные интерпретации, чтобы каждый гость смог найти для себя идеальное сочетание.",
    menu_text1: "Мы предлагаем широкий выбор блюд турецкой кухни, приготовленных по традиционным рецептам, а также разнообразные напитки на любой вкус. Меню объединяет классику и современные интерпретации, чтобы каждый гость смог найти для себя идеальное сочетание.",
    menu_text2: "Мы предлагаем широкий выбор блюд турецкой кухни, приготовленных по традиционным рецептам, а также разнообразные напитки на любой вкус. Меню объединяет классику и современные интерпретации, чтобы каждый гость смог найти для себя идеальное сочетание.",
    menu_text: "Мы предлагаем широкий выбор блюд турецкой кухни, приготовленных по традиционным рецептам, а также разнообразные напитки на любой вкус. Меню объединяет классику и современные интерпретации, чтобы каждый гость смог найти для себя идеальное сочетание.",
    menu_open: "Menyunu aç",

    contacts_title: "Əlaqə",
    phone_label: "Telefon",
    ig_label: "Instagram",
    wa_label: "WhatsApp",
    contact_sub: "Sizin üçün uyğun olan üsulla bizimlə əlaqə saxlayın — telefonla və ya messencerlərdə.",
    contact_wa: "WhatsApp",
    contact_ig: "Instagram",
    contact_call: "Zəng et",

    location_title: "Lokasiya",
    location_sub: "Google Maps-də bax",

    footer_hours: "Çərşənbə axşamı–Bazar: 10:00 — son müştəri (Bazar ertəsi bağlıdır)",

    schedule_title: "Canlı musiqi proqramı",
    schedule_sub: "Hər gün 21:00–23:00",

    booking_title: "Masa rezervasiyası",
    booking_sub: "Rezervasiyanız yaxın vaxtda emal olunacaq.",
    f_name: "Ad",
    f_phone: "Telefon",
    f_date: "Tarix",
    f_time: "Saat",
    f_guests: "Qonaq sayı",
    f_msg: "Mesaj (istəyə görə)",
    f_submit: "Rezervasiyanı göndər",
    f_hint: "Depozit: Çərşənbə axşamı / Çərşənbə / Cümə axşamı — 50 AZN (hər qonaq üçün), Cümə / Şənbə / Bazar — 100 AZN (hər qonaq üçün). Qəlyan depozitə daxil deyil.",

    ok_sent: "Rezervasiyanız qəbul edildi və hazırda emal olunur.",
    booking_unavailable: "Onlayn rezervasiya müvəqqəti olaraq əlçatan deyil. Zəhmət olmasa, zəng edin və ya WhatsApp vasitəsilə yazın.",
    err_required: "Zəhmət olmasa, telefon nömrəsini daxil edin.",
    err_fill_all: "Zəhmət olmasa, bütün zəruri xanaları doldurun.",
    err_missing_prefix: "Doldurulmalıdır:",
    field_name: "Ad",
    field_phone: "Telefon",
    field_date: "Tarix",
    field_time: "Saat",
    field_guests: "Qonaq sayı",
    err_send: "Göndərmə zamanı xəta baş verdi. Zəhmət olmasa, yenidən cəhd edin."
  },
  ru: {
    nav_home: "Главная",
    nav_music: "Живая музыка",
    nav_menu: "Меню",
    nav_contacts: "Контакты",
    nav_location: "Локация",
    nav_rules: "Правила",

    hero_title: "Bahçe Restoran",
    hero_title_html: "<span class=\"brand-hero-main\">Bahçe</span> <span class=\"brand-hero-sub\">RESTORAN</span>",
    hero_slogan: "Turkish Vibes in Baku",
    hero_desc: "FOOD • DRINKS • MUSIC • SHISHA",
    cta_book: "Забронировать стол",
    cta_menu: "Открыть меню",

    rules_title: "Правила",
    rules_sub: "Ознакомьтесь с правилами нашего заведения заранее.",

    r1_t: "Часы работы ресторана",
    r1_b: "С 10:00 до последнего клиента.",

    r2_t: "Живая музыка",
    r2_b: "Каждый день с 21:00 до 23:00.",

    r3_t: "Выходной день",
    r3_b: "По понедельникам ресторан не работает.",

    r4_t: "Возрастные ограничения",
    r4_b: "После 19:00 ресторан не принимает детей младше 13 лет. Гости в возрасте от 13 до 18 лет принимаются только в сопровождении родителей.",

    r5_t: "Формат заведения",
    r5_b: "Ресторан не принимает компании, состоящие только из мужчин.",

    r6_t: "Депозитная система",
    r6_b: "— По вторникам, средам и четвергам сумма депозита для каждого гостя составляет 50 AZN. — По пятницам, субботам и воскресеньям сумма депозита для каждого гостя составляет 100 AZN. Кальян в сумму депозита не включён.",

    r7_t: "Бронирование",
    r7_b: "Просим указывать точное количество гостей при бронировании, так как при оплате счёта депозит взимается за то количество персон, которое было заявлено заранее.",

    r8_t: "Запрет на световое оборудование",
    r8_b: "Использование любых световых устройств, вспышек, прожекторов и других приборов, излучающих яркий свет, в ресторане запрещено, так как это мешает отдыху других гостей.",

    r9_t: "Дресс-код",
    r9_b: "В ресторане действует дресс-код. Просим учитывать формат заведения и выбирать соответствующую одежду. Одежда пляжного типа и чрезмерно откровенные наряды не приветствуются.",

    rules_footer: "Администрация оставляет за собой право отказать во входе при несоблюдении данных правил.\n\nС уважением,\nСемья Bahçe",

    music_title: "Живая музыка",
    music_sub: "Каждый день с 21:00 до 23:00",
    music_btn: "Расписание выступлений",
    music_event_label: "Ближайшее событие",
    music_event_title: "На этой неделе",
    music_event_note: "Чтобы обновлять фото: /assets/live-event.jpg",

    menu_title: "Меню",
    menu_subline: "Мы предлагаем широкий выбор блюд турецкой кухни, приготовленных по традиционным рецептам, а также разнообразные напитки на любой вкус. Меню объединяет классику и современные интерпретации, чтобы каждый гость смог найти для себя идеальное сочетание.",
    menu_text1: "Мы предлагаем широкий выбор блюд турецкой кухни, приготовленных по традиционным рецептам, а также разнообразные напитки на любой вкус. Меню объединяет классику и современные интерпретации, чтобы каждый гость смог найти для себя идеальное сочетание.",
    menu_text2: "Мы предлагаем широкий выбор блюд турецкой кухни, приготовленных по традиционным рецептам, а также разнообразные напитки на любой вкус. Меню объединяет классику и современные интерпретации, чтобы каждый гость смог найти для себя идеальное сочетание.",
    menu_text: "Мы предлагаем широкий выбор блюд турецкой кухни, приготовленных по традиционным рецептам, а также разнообразные напитки на любой вкус. Меню объединяет классику и современные интерпретации, чтобы каждый гость смог найти для себя идеальное сочетание.",
    menu_open: "Открыть меню",

    contacts_title: "Контакты",
    phone_label: "Телефон",
    ig_label: "Instagram",
    wa_label: "WhatsApp",
    contact_sub: "Свяжитесь с нами удобным для вас способом — по телефону или в мессенджерах.",
    contact_wa: "WhatsApp",
    contact_ig: "Instagram",
    contact_call: "Позвонить",

    location_title: "Локация",
    location_sub: "Посмотреть в Google Maps",

    footer_hours: "Вторник–Воскресенье: 10:00 — последний гость (Понедельник выходной)",

    schedule_title: "Расписание живой музыки",
    schedule_sub: "Каждый день 21:00–23:00",

    booking_title: "Бронирование стола",
    booking_sub: "Ваша бронь будет обработана в ближайшее время.",
    f_name: "Имя",
    f_phone: "Телефон",
    f_date: "Дата",
    f_time: "Время",
    f_guests: "Количество гостей",
    f_msg: "Сообщение (опционально)",
    f_submit: "Отправить бронь",
    f_hint: "Депозит: Вторник / Среда / Четверг — 50 AZN (с человека), Пятница / Суббота / Воскресенье — 100 AZN (с человека). Кальян в депозит не входит.",

    ok_sent: "Ваша бронь принята и находится в обработке.",
    booking_unavailable: "Онлайн-бронирование временно недоступно. Пожалуйста, позвоните нам или напишите в WhatsApp.",
    err_required: "Пожалуйста, укажите номер телефона.",
    err_fill_all: "Пожалуйста, заполните все поля.",
    err_missing_prefix: "Нужно заполнить:",
    field_name: "Имя",
    field_phone: "Телефон",
    field_date: "Дата",
    field_time: "Время",
    field_guests: "Количество гостей",
    err_send: "Ошибка отправки. Пожалуйста, попробуйте ещё раз."
  },
  en: {
    nav_home: "Home",
    nav_music: "Live Music",
    nav_menu: "Menu",
    nav_contacts: "Contacts",
    nav_location: "Location",
    nav_rules: "Rules",

    hero_title: "Bahçe Restoran",
    hero_title_html: "<span class=\"brand-hero-main\">Bahçe</span> <span class=\"brand-hero-sub\">RESTORAN</span>",
    hero_slogan: "Turkish Vibes in Baku",
    hero_desc: "FOOD • DRINKS • MUSIC • SHISHA",
    cta_book: "Reserve a table",
    cta_menu: "Open menu",

    rules_title: "Rules",
    rules_sub: "Please review the rules in advance.",

    r1_t: "Opening hours",
    r1_b: "From 10:00 until the last guest.",

    r2_t: "Live music",
    r2_b: "Daily from 21:00 to 23:00.",

    r3_t: "Day off",
    r3_b: "The restaurant is closed on Mondays.",

    r4_t: "Age restrictions",
    r4_b: "After 19:00, the restaurant does not admit children under the age of 13. Guests aged 13 to 18 are admitted only when accompanied by parents.",

    r5_t: "Venue policy",
    r5_b: "The restaurant does not accept groups consisting of men only.",

    r6_t: "Deposit policy",
    r6_b: "— On Tuesdays, Wednesdays and Thursdays, the deposit is 50 AZN per guest. — On Fridays, Saturdays and Sundays, the deposit is 100 AZN per guest. Shisha is not included in the deposit.",

    r7_t: "Reservations",
    r7_b: "Please specify the exact number of guests when booking, as the deposit is charged for the number of persons stated in advance when the bill is paid.",

    r8_t: "No lighting equipment",
    r8_b: "The use of any lighting devices, flashes, spotlights or other bright-light equipment is prohibited, as it may disturb other guests.",

    r9_t: "Dress code",
    r9_b: "A dress code is in effect. Please consider the venue format and choose appropriate attire. Beachwear and overly revealing outfits are not recommended.",

    rules_footer: "The management reserves the right to refuse entry in case these rules are not respected.\n\nWith respect,\nThe Bahçe Family",

    music_title: "Live music",
    music_sub: "Daily from 21:00 to 23:00",
    music_btn: "Performance schedule",
    music_event_label: "Upcoming event",
    music_event_title: "This week",
    music_event_note: "To update the photo: /assets/live-event.jpg",

    menu_title: "Menu",
    menu_subline: "Мы предлагаем широкий выбор блюд турецкой кухни, приготовленных по традиционным рецептам, а также разнообразные напитки на любой вкус. Меню объединяет классику и современные интерпретации, чтобы каждый гость смог найти для себя идеальное сочетание.",
    menu_text1: "Мы предлагаем широкий выбор блюд турецкой кухни, приготовленных по традиционным рецептам, а также разнообразные напитки на любой вкус. Меню объединяет классику и современные интерпретации, чтобы каждый гость смог найти для себя идеальное сочетание.",
    menu_text2: "Мы предлагаем широкий выбор блюд турецкой кухни, приготовленных по традиционным рецептам, а также разнообразные напитки на любой вкус. Меню объединяет классику и современные интерпретации, чтобы каждый гость смог найти для себя идеальное сочетание.",
    menu_text: "Мы предлагаем широкий выбор блюд турецкой кухни, приготовленных по традиционным рецептам, а также разнообразные напитки на любой вкус. Меню объединяет классику и современные интерпретации, чтобы каждый гость смог найти для себя идеальное сочетание.",
    menu_open: "Open menu",

    contacts_title: "Contacts",
    phone_label: "Phone",
    ig_label: "Instagram",
    wa_label: "WhatsApp",
    contact_sub: "Contact us in any convenient way — by phone or in messengers.",
    contact_wa: "WhatsApp",
    contact_ig: "Instagram",
    contact_call: "Call",

    location_title: "Location",
    location_sub: "View on Google Maps",

    footer_hours: "Tuesday–Sunday: 10:00 — last guest (Monday closed)",

    schedule_title: "Live music schedule",
    schedule_sub: "Daily 21:00–23:00",

    booking_title: "Table reservation",
    booking_sub: "Your booking will be processed shortly.",
    f_name: "Name",
    f_phone: "Phone",
    f_date: "Date",
    f_time: "Time",
    f_guests: "Number of guests",
    f_msg: "Message (optional)",
    f_submit: "Send reservation",
    f_hint: "Deposit: Tuesday / Wednesday / Thursday — 50 AZN per guest, Friday / Saturday / Sunday — 100 AZN per guest. Shisha is not included.",
    booking_unavailable: "Online booking is temporarily unavailable. Please call us or message us on WhatsApp.",
    ok_sent: "Your reservation has been received and is being processed.",
    err_required: "Please enter your phone number.",
    err_fill_all: "Please fill in all required fields.",
    err_missing_prefix: "Please fill:",
    field_name: "Name",
    field_phone: "Phone",
    field_date: "Date",
    field_time: "Time",
    field_guests: "Number of guests",
    err_send: "Sending failed. Please try again."
  }
};

window.I18N = I18N;

const SOCIAL = {
  instagramUrl: "https://www.instagram.com/bahce_restoran/",
  whatsappUrl: "https://wa.me/994507171199"
};

window.SOCIAL = SOCIAL;

function getLang(){
  const saved = localStorage.getItem("lang");
  const allowed = ["az","ru","en"];
  if(saved && allowed.includes(saved)) return saved;
  return "az";
}

function setLang(lang){
  localStorage.setItem("lang", lang);
  applyLang(lang);
  window.dispatchEvent(new CustomEvent("langchange", { detail: { lang } }));
}

function applyLang(lang){
  const dict = I18N[lang] || I18N.az;
  document.documentElement.lang = lang;

  document.querySelectorAll("[data-i18n]").forEach((el)=>{
    const key = el.getAttribute("data-i18n");
    if(!key) return;
    const val = dict[key];
    if(typeof val !== "string") return;
    el.textContent = val;
  });

  document.querySelectorAll("[data-i18n-html]").forEach((el)=>{
    const key = el.getAttribute("data-i18n-html");
    if(!key) return;
    const val = dict[key];
    if(typeof val !== "string") return;
    el.innerHTML = val.replace(/\n/g,"<br>");
  });

  document.querySelectorAll("[data-lang-btn]").forEach((btn)=>{
    const code = btn.getAttribute("data-lang-btn");
    btn.setAttribute("aria-pressed", String(code === lang));
  });

  document.querySelectorAll("[data-social='instagram']").forEach((a)=>a.setAttribute("href", SOCIAL.instagramUrl));
  document.querySelectorAll("[data-social='whatsapp']").forEach((a)=>a.setAttribute("href", SOCIAL.whatsappUrl));
}

function initLangUI(){
  document.querySelectorAll("[data-lang-btn]").forEach((btn)=>{
    btn.addEventListener("click", ()=>{
      const code = btn.getAttribute("data-lang-btn");
      if(!code) return;
      setLang(code);
    });
  });
}

function initDrawer(){
  const burger = document.querySelector("[data-burger]");
  const backdrop = document.querySelector("[data-drawer-backdrop]");
  const drawer = document.querySelector("[data-drawer]");
  const closeBtn = document.querySelector("[data-drawer-close]");

  const open = ()=>{
    drawer?.classList.add("open");
    backdrop?.classList.add("open");
    document.body.style.overflow = "hidden";
  };
  const close = ()=>{
    drawer?.classList.remove("open");
    backdrop?.classList.remove("open");
    document.body.style.overflow = "";
  };

  burger?.addEventListener("click", open);
  closeBtn?.addEventListener("click", close);
  backdrop?.addEventListener("click", close);

  drawer?.querySelectorAll("a").forEach((a)=>a.addEventListener("click", close));
}

function forceTop(){
  if(window.location.hash !== "#top") return;
  requestAnimationFrame(()=> window.scrollTo({ top: 0, left: 0, behavior: "auto" }));
}

function initYear(){
  const el = document.querySelector("[data-year]");
  if(el) el.textContent = String(new Date().getFullYear());
}

function initReveal(){
  const els = Array.from(document.querySelectorAll("[data-reveal]"));
  if(!els.length) return;

  if(!("IntersectionObserver" in window)){
    els.forEach((el)=>el.classList.add("is-revealed"));
    return;
  }

  const io = new IntersectionObserver((entries)=>{
    entries.forEach((entry)=>{
      if(!entry.isIntersecting) return;
      entry.target.classList.add("is-revealed");
      io.unobserve(entry.target);
    });
  }, { threshold: 0.14 });

  els.forEach((el)=>io.observe(el));
}

function init(){
  initDrawer();
  initLangUI();
  applyLang(getLang());
  initYear();
  initReveal();

  document.querySelectorAll("a[href='#top']").forEach((a)=>{
    a.addEventListener("click", (e)=>{
      e.preventDefault();
      window.location.hash = "#top";
      forceTop();
    });
  });

  forceTop();
  window.addEventListener("hashchange", forceTop);
}

document.addEventListener("DOMContentLoaded", init);
